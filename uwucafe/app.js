
Categories = {
    1: "Combos",
    2: "Mains",
    3: "Sides",
    4: "Deserts",
    5: "Drinks",
    6: "Business Deals"
}

Menus = [
    {
        "name": "The Grinch Meal",
        "cost": 3000,
        "category": 1,
        "image": "GMeal.png"
    },
    {
        "name": "The Santas Meal",
        "cost": 3000,
        "category": 1,
        "image": "SM.png"
    },
    {
        "name": "RoudolfsGo2",
        "cost": 3000,
        "category": 1,
        "image": "RG2.png"
    },
    {
        "name": "Northpole Meal",
        "cost": 3000,
        "category": 1,
        "image": "NPM.png"
    },
    {
        "name": "Frostys Food Plate",
        "cost": 3000,
        "category": 1,
        "image": "FFP.png"
    },
    {
        "name": "Valentines Day Meal",
        "cost": 4500,
        "category": 1,
        "image": "VDMC.png"
    },
    {
        "name": "Beef Wellington",
        "cost": 900,
        "category": 2,
        "image": "BWS.png"
    },
    {
        "name": "Chicken Fried Rice",
        "cost": 1000,
        "category": 2,
        "image": "CFR.png"
    },
    {
        "name": "Honey-Glazed Ham Steak",
        "cost": 900,
        "category": 2,
        "image": "HGHS.png"
    },
    {
        "name": "Grilled Salmon with Dill Cream",
        "cost": 900,
        "category": 2,
        "image": "GSDC.png"
    },
    {
        "name": "Chicken Cordon Bleu",
        "cost": 900,
        "category": 2,
        "image": "CCB.png"
    },
    {
        "name": "Truffle Mushroom Risotto",
        "cost": 900,
        "category": 2,
        "image": "TMR.png"
    },
    {
        "name": "California Sushi Roll Platter",
        "cost": 300,
        "category": 2,
        "image": "CaliforniaSushiRollPlatter.png"
    },
    {
        "name": "Tempura Dragon Sushi Roll Platter",
        "cost": 300,
        "category": 2,
        "image": "TempuraDragonSushiRollPlatter.png"
    },
    {
        "name": "Spicy Girl Sushi Roll Platter",
        "cost": 300,
        "category": 2,
        "image": "SpicyGirlSushiRollPlatter.png"
    },
    {
        "name": "Bandit Pizza Bites",
        "cost": 350,
        "category": 2,
        "image": "pizzabites.png"
    },
    {
        "name": "Cheddar Cornbread",
        "cost": 750,
        "category": 3,
        "image": "CheddarCornbread.png"
    },
    {
        "name": "Couples Egg Rolls",
        "cost": 800,
        "category": 3,
        "image": "ER.png"
    },
    {
        "name": "Charcuterie Salad",
        "cost": 750,
        "category": 3,
        "image": "CS.png"
    },
    {
        "name": "Garlic Mashed Potatoes",
        "cost": 750,
        "category": 3,
        "image": "GMP.png"
    },
    {
        "name": "Korean Corn Dogs",
        "cost": 250,
        "category": 3,
        "image": "KoreanCornDogs.png"
    },
    {
        "name": "Stuffed Bell Peppers",
        "cost": 750,
        "category": 3,
        "image": "SBP.png"
    },
    {
        "name": "Santa's Sliders",
        "cost": 750,
        "category": 3,
        "image": "SS.png"
    },
    {
        "name": "Gingerbread",
        "cost": 850,
        "category": 4,
        "image": "GB.png"
    },
    {
        "name": "Xmas Cat Sugar Cookies",
        "cost": 850,
        "category": 4,
        "image": "CSC.png"
    },
    {
        "name": "X-Mas Tree Sugar Cookie",
        "cost": 850,
        "category": 4,
        "image": "CTC.png"
    },
    {
        "name": "Snow Flake Sugar Cookie",
        "cost": 850,
        "category": 4,
        "image": "SFC.png"
    },
    {
        "name": "Churros",
        "cost": 850,
        "category": 4,
        "image": "MC.png"
    },
    {
        "name": "Flan",
        "cost": 850,
        "category": 4,
        "image": "UF.png"
    },
    {
        "name": "Taiyaki",
        "cost": 850,
        "category": 4,
        "image": "Taiyaki.png"
    },
    {
        "name": "UwU Candy Cane",
        "cost": 850,
        "category": 4,
        "image": "CC.png"
    },
    {
        "name": "New Years Sugar Cookies",
        "cost": 1000,
        "category": 4,
        "image": "NYC.png"
    },
    {
        "name": "Red Velvet Cake",
        "cost": 900,
        "category": 4,
        "image": "RVC.png"
    },
    {
        "name": "Boba Tea",
        "cost": 350,
        "category": 5,
        "image": "BobaTea.png"
    },
    {
        "name": "Lovely Hot Chocolate",
        "cost": 55,
        "category": 5,
        "image": "LovelyHotChocolate.png"
    },
    {
        "name": "Strawberry Peach Cream Refresher",
        "cost": 1000,
        "category": 5,
        "image": "SPR.png"
    },
    {
        "name": "Strawberry Shortcake Frapp",
        "cost": 1000,
        "category": 5,
        "image": "SSF.png"
    },
    {
        "name": "Bubble Teas",
        "cost": 350,
        "category": 5,
        "image": "BubbleTea.png"
    },
    {
        "name": "Eggnog Frapp",
        "cost": 900,
        "category": 5,
        "image": "EF.png"
    },
    {
        "name": "Apple Cider",
        "cost": 900,
        "category": 5,
        "image": "AC.png"
    },
    {
        "name": "Candy Cane Milkshake",
        "cost": 900,
        "category": 5,
        "image": "CCMS.png"
    },
    {
        "name": "Peppermint Mocha",
        "cost": 900,
        "category": 5,
        "image": "PM.png"
    },
    {
        "name": "Caramel Brulee Latte",
        "cost": 900,
        "category": 5,
        "image": "CBL.png"
    },
    {
        "name": "Peppermint Meowcaroon *Unlimited Stamina*",
        "cost": 10000,
        "category": 6,
        "image": "TurM.png"
    },
    {
        "name": "Mint Meowcaroon *Armor*",
        "cost": 9000,
        "category": 6,
        "image": "GM.png"
    },
    {
        "name": "Strawberry Meowcaroon *Sprint Boost*",
        "cost":10000,
        "category": 6,
        "image": "PinkM.png"
    },
    {
        "name": "Chocolate Meowcaroon *Healing*",
        "cost": 10000,
        "category": 6,
        "image": "BM.png"
    },
    {
        "name": "Choc Coverd Strawberry Bouquet",
        "cost": 2000,
        "category": 6,
        "image": "CQB.png"
    }
]




var discount = 30;
var mainContent = $(".main-content");
var orderContent = $(".order-content");
var contentHTML = '';
function createMenu() {
    for (key in Categories) {
        var contentCategory = `<div class="content-category">
                                <h1>${Categories[key]}</h1>
                                <div class="content-category-items">
                                
                            `;
        for (menu of Menus) {
            if (menu.category == key) {
                var encodedName = menu.name.replace(/\s+/g, '-');
                var categoryItem = `
                    <div class="category-item" data-name = ${encodedName} data-cost = ${menu.cost} data-image = ${menu.image}>
                        <img src=assets/${menu.image} alt="">
                        <div class="info-text">
                            <h2>${menu.name}</h2>
                            <h2><strong>${menu.cost}$</strong></h2>
                        </div>
                        <div class="add-to-basket-btn">
                            <p>Add To Order</p>
                        </div>
                    </div>
            `;
                contentCategory += categoryItem; // Öğeyi kategoriye ekler
                //console.log(menu.name, menu.category);
            }
        }

        contentCategory += '</div>'; // Kategoriyi kapatır
        contentCategory += '</div>'; // Kategoriyi kapatır
        //console.log(contentCategory);
        //contentHTML += contentCategory; // Kategori içeriğini dizeye ekler
        mainContent.append(contentCategory);
    }
}

$(document).ready(function () {
    createMenu();
    //console.log(contentHTML);
    //mainContent.append(contentHTML);
});

$(document).on('click', '.add-to-basket-btn', function () {
    var name = $(this).parent().data('name');
    var cost = $(this).parent().data('cost');
    var image = $(this).parent().data('image');
    //console.log(name, cost, image);
    if ( orderContent.find(`#${name}`).length > 0) {
        
        orderContent.find(`#${name} > .add-container > .count`).val(parseInt(orderContent.find(`#${name} > .add-container > .count`).val()) + 1);
        orderContent.find(`#${name} > .item-info > h2 > strong`).text(parseInt(orderContent.find(`#${name} > .item-info > h2 > strong`).text()) + 1 + 'x');
        $(".total-count").text(parseInt($(".total-count").text()) + cost + " $");
        return;
    }
    var orderItem = `
        <div class="order-item" id = ${name} data-cost = ${cost}>
            <img src=assets/${image} alt="">
            <div class="item-info">
                <h2>${name}</h2>
                <h2><strong>1x</strong></h2>
            </div>
            <div class="add-container">
                <div class="decrese">-</div>
                <!-- <div class="count">1</div> -->
                <input type="text" class="count" value="1">
                <div class="add">+</div>
            </div>
            <div class="delete">
                <img src="assets/deletebtn.png" alt="">
            </div>
        </div>
    `;
    $(".total-count").text(parseInt($(".total-count").text()) + cost + " $");
    orderContent.append(orderItem);
});

$(document).on('change', '.count', function () {
    var count = parseInt($(this).val());
    if (count < 1 || isNaN(count)) {
        $(this).val(1);
        count = 1;
    }
    $(this).parent().parent().find('.item-info > h2 > strong').text(count + 'x');
    
    var totalPrice = 0;
    $(".order-content > div").each(function () {
        var count = parseInt($(this).find('.count').val());
        var cost = parseInt($(this).data('cost'));
        totalPrice += count * cost;
    });

    $(".total-count").text(totalPrice + " $");

});


$(document).on('click', '.decrese', function () {
    var count = parseInt($(this).parent().find('.count').val())//.text());
    if (count == 1) {
        $(this).parent().parent().remove();
        $(".total-count").text(parseInt($(".total-count").text()) - parseInt($(this).parent().parent().data('cost')) + " $");
    } else {
        $(this).parent().find('.count').val(count - 1);//.text(count - 1);
        $(this).parent().parent().find('.item-info > h2 > strong').text(count - 1 + 'x');
        $(".total-count").text(parseInt($(".total-count").text()) - parseInt($(this).parent().parent().data('cost')) + " $");
    }
});

$(document).on('click', '.add', function () {
    var count = parseInt($(this).parent().find('.count').val())//.text());
    $(this).parent().find('.count').val(count + 1);//.text(count + 1);
    $(this).parent().parent().find('.item-info > h2 > strong').text(count + 1 + 'x');
    $(".total-count").text(parseInt($(".total-count").text()) + parseInt($(this).parent().parent().data('cost')) + " $");
});

$(document).on('click', '.delete', function () {
    var count = parseInt($(this).parent().find('.count').val())//.text());
    var cost = parseInt($(this).parent().data('cost'));
    $(".total-count").text(parseInt($(".total-count").text()) - (count * cost) + " $");
    $(this).parent().remove();
});

$(document).on('click', '.clear-btn', function () {
    orderContent.empty();
    $(".total-count").text("0 $");
});

$(document).on('click', '.apply-discount', function () {
    //var discount = parseInt($(".discount-input").val());
    var total = parseInt($(".total-count").text());
    $(".total-count").text((total - ((discount / 100) * total)).toFixed(0) + " $");
});

$(document).on('click', '.coppy-order-btn', function () {    
    var order = [];
    orderContent.children().each(function () {
        var name = $(this).attr('id')
        var cost = $(this).data('cost');
        var count = $(this).find('.count').val()//.text();

        //order.push(count + 'x ' + name + ' ' + cost + '$');
        order.push(count + 'x ' + name);
    });
    // console.log(order);
    // var orderString = JSON.stringify(order);
    // console.log(orderString);
    // navigator.clipboard.writeText(orderString);
    var orderString = order.join(', ');
    console.log(orderString);
    
    // Clipboard'a yaz
    navigator.clipboard.writeText(orderString).then(function() {
        console.log('Order copied to clipboard');
    }).catch(function(err) {
        console.error('Could not copy text: ', err);
    });

    $(this).css('background-color', '#91ff5e');
    $(this).find("h3").text('Order Copied');
    setTimeout(() => {
        $(this).css('background-color', '#FFC85E');
        $(this).find("h3").text('Copy Order');
    }, 2000);
});

$(document).on('click', '.dark-mode', function () {
    $(".mainbody").toggleClass('dark');
    $(".basket-container").toggleClass('dark');
    $(".header").toggleClass('dark');
    $(".category-item").toggleClass('dark-item');
    $(".basket-cantainer").toggleClass('dark-order');
    $(".content-category").toggleClass('dark-content-category');
    $(".text").toggleClass('dark-text');
    //$(".item-info").toggleClass('dark-text');
    console.log('Dark mode activated');
});
