
Categories = {
    1: "Combos",
    2: "Mains",
    3: "Sides",
    4: "Deserts",
    5: "Drinks",
    6: "Business Deals"
}

Menus = [
    {
        "name": "Lucky Bento Box Combo",
        "cost": 10000,
        "category": 1,
        "image": "LuckyBentoBoxCombo.png"
    },
    {
        "name": "9 Lives Combo",
        "cost": 4000,
        "category": 1,
        "image": "9LivesCombo.png"
    },
    {
        "name": "Kitty Cat Meal",
        "cost": 3500,
        "category": 1,
        "image": "KittyCatMeal.png"
    },
    {
        "name": "Cat Burglar Combo",
        "cost": 3000,
        "category": 1,
        "image": "CatBurglarCombo.png"
    },
    {
        "name": "Pawcakes Combo",
        "cost": 2500,
        "category": 1,
        "image": "PawcakesCombo.png"
    },
    {
        "name": "St. Patricks Meal",
        "cost": 2200,
        "category": 1,
        "image": "SPC.png"
    },
    {
        "name": "Om Nom Omurice",
        "cost": 1200,
        "category": 2,
        "image": "OmNomOmurice.png"
    },
    {
        "name": "Sugio Cat Su Sando",
        "cost": 1150,
        "category": 2,
        "image": "SugioCatSuSando.png"
    },
    {
        "name": "Kira Kira Curry",
        "cost": 1100,
        "category": 2,
        "image": "KiraKiraCurry.png"
    },
    {
        "name": "Hamburg Steak",
        "cost": 1050,
        "category": 2,
        "image": "HamburgSteak.png"
    },
    {
        "name": "Doki Doki Pancakes",
        "cost": 1000,
        "category": 2,
        "image": "DokiDokiPancakes.png"
    },
    {
        "name": "California Sushi Roll Platter",
        "cost": 1000,
        "category": 2,
        "image": "CaliforniaSushiRollPlatter.png"
    },
    {
        "name": "Tempura Dragon Sushi Roll Platter",
        "cost": 1000,
        "category": 2,
        "image": "TempuraDragonSushiRollPlatter.png"
    },
    {
        "name": "Spicy Girl Sushi Roll Platter",
        "cost": 1000,
        "category": 2,
        "image": "SpicyGirlSushiRollPlatter.png"
    },
    {
        "name": "Bandit Pizza Bites",
        "cost": 1200,
        "category": 2,
        "image": "pizzabites.png"
    },
    {
        "name": "UwU Irish Stew",
        "cost": 1000,
        "category": 2,
        "image": "IrishStew.png"
    },
    {
        "name": "Chicken noodle Soup",
        "cost": 900,
        "category": 3,
        "image": "chickennoodlesoup.PNG"
    },
    {
        "name": "Kitty Rice Balls",
        "cost": 750,
        "category": 3,
        "image": "KittyRiceBalls.png"
    },
    {
        "name": "Rice bowl",
        "cost": 500,
        "category": 3,
        "image": "Ricebowl.png"
    },
    {
        "name": "Korean Corn Dogs",
        "cost": 900,
        "category": 3,
        "image": "KoreanCornDogs.png"
    },
    {
        "name": "Ballaberry Cupcake",
        "cost": 950,
        "category": 4,
        "image": "BallaberryCupcake.png"
    },
    {
        "name": "Dragon Fire Cupcake",
        "cost": 950,
        "category": 4,
        "image": "DragonFireCupcake.png"
    },
    {
        "name": "Meowchi Mochi Ice Cream",
        "cost": 900,
        "category": 4,
        "image": "MeowchiMochiIceCream.png"
    },
    {
        "name": "Ginger Kitty Cookie",
        "cost": 850,
        "category": 4,
        "image": "GingerKittyCookie.png"
    },
    {
        "name": "Purrfect Parfait",
        "cost": 900,
        "category": 4,
        "image": "PurrfectParfait.png"
    },
    {
        "name": "Oxygen Cake",
        "cost": 1200,
        "category": 4,
        "image": "OxygenCake.png"
    },
    {
        "name": "Strawberry Shortcake",
        "cost": 1200,
        "category": 4,
        "image": "StrawberryShortcake.png"
    },
    {
        "name": "Frosted Sugar Cookies",
        "cost": 500,
        "category": 4,
        "image": "Frostedsugarcookie.png"
    },
    {
        "name": "Boba Tea",
        "cost": 1150,
        "category": 5,
        "image": "BobaTea.png"
    },
    {
        "name": "Lovely Hot Chocolate",
        "cost": 1100,
        "category": 5,
        "image": "LovelyHotChocolate.png"
    },
    {
        "name": "Matcha Coffee",
        "cost": 1050,
        "category": 5,
        "image": "MatchaCoffee.png"
    },
    {
        "name": "Sweet Herbal Tea",
        "cost": 1050,
        "category": 5,
        "image": "SweetHerbalTea.png"
    },
    {
        "name": "Bubble Teas",
        "cost": 1200,
        "category": 5,
        "image": "BubbleTea.png"
    },
    {
        "name": "Lucky Shamrock Mint Shake",
        "cost": 1000,
        "category": 5,
        "image": "Mintshake.png"
    },
{
        "name": "Peppermint Meowcaroon Unlimited Stamina",
        "cost": 10000,
        "category": 6,
        "image": "TurM.png"
    },
    {
        "name": "Mint Meowcaroon Armor",
        "cost": 10000,
        "category": 6,
        "image": "GM.png"
    },
    {
        "name": "Strawberry Meowcaroon Sprint Boost",
        "cost":10000,
        "category": 6,
        "image": "PinkM.png"
    },
    {
        "name": "Chocolate Meowcaroon Healing",
        "cost": 10000,
        "category": 6,
        "image": "BM.png"
    }
]




var discount = 30;
var mainContent = $(".main-content");
var orderContent = $(".order-content");
var contentHTML = '';
function createMenu() {
    for (key in Categories) {
        var contentCategory = `<div class="content-category">
                                <h1>${Categories[key]}</h1>
                                <div class="content-category-items">
                                
                            `;
        for (menu of Menus) {
            if (menu.category == key) {
                var encodedName = menu.name.replace(/\s+/g, '-');
                var categoryItem = `
                    <div class="category-item" data-name = ${encodedName} data-cost = ${menu.cost} data-image = ${menu.image}>
                        <img src=assets/${menu.image} alt="">
                        <div class="info-text">
                            <h2>${menu.name}</h2>
                            <h2><strong>${menu.cost}$</strong></h2>
                        </div>
                        <div class="add-to-basket-btn">
                            <p>Add To Order</p>
                        </div>
                    </div>
            `;
                contentCategory += categoryItem; // Öğeyi kategoriye ekler
                //console.log(menu.name, menu.category);
            }
        }

        contentCategory += '</div>'; // Kategoriyi kapatır
        contentCategory += '</div>'; // Kategoriyi kapatır
        //console.log(contentCategory);
        //contentHTML += contentCategory; // Kategori içeriğini dizeye ekler
        mainContent.append(contentCategory);
    }
}

$(document).ready(function () {
    createMenu();
    //console.log(contentHTML);
    //mainContent.append(contentHTML);
});

$(document).on('click', '.add-to-basket-btn', function () {
    var name = $(this).parent().data('name');
    var cost = $(this).parent().data('cost');
    var image = $(this).parent().data('image');
    //console.log(name, cost, image);
    if ( orderContent.find(`#${name}`).length > 0) {
        
        orderContent.find(`#${name} > .add-container > .count`).val(parseInt(orderContent.find(`#${name} > .add-container > .count`).val()) + 1);
        orderContent.find(`#${name} > .item-info > h2 > strong`).text(parseInt(orderContent.find(`#${name} > .item-info > h2 > strong`).text()) + 1 + 'x');
        $(".total-count").text(parseInt($(".total-count").text()) + cost + " $");
        return;
    }
    var orderItem = `
        <div class="order-item" id = ${name} data-cost = ${cost}>
            <img src=assets/${image} alt="">
            <div class="item-info">
                <h2>${name}</h2>
                <h2><strong>1x</strong></h2>
            </div>
            <div class="add-container">
                <div class="decrese">-</div>
                <!-- <div class="count">1</div> -->
                <input type="text" class="count" value="1">
                <div class="add">+</div>
            </div>
            <div class="delete">
                <img src="assets/deletebtn.png" alt="">
            </div>
        </div>
    `;
    $(".total-count").text(parseInt($(".total-count").text()) + cost + " $");
    orderContent.append(orderItem);
});

$(document).on('change', '.count', function () {
    var count = parseInt($(this).val());
    if (count < 1 || isNaN(count)) {
        $(this).val(1);
        count = 1;
    }
    $(this).parent().parent().find('.item-info > h2 > strong').text(count + 'x');
    
    var totalPrice = 0;
    $(".order-content > div").each(function () {
        var count = parseInt($(this).find('.count').val());
        var cost = parseInt($(this).data('cost'));
        totalPrice += count * cost;
    });

    $(".total-count").text(totalPrice + " $");

});


$(document).on('click', '.decrese', function () {
    var count = parseInt($(this).parent().find('.count').val())//.text());
    if (count == 1) {
        $(this).parent().parent().remove();
        $(".total-count").text(parseInt($(".total-count").text()) - parseInt($(this).parent().parent().data('cost')) + " $");
    } else {
        $(this).parent().find('.count').val(count - 1);//.text(count - 1);
        $(this).parent().parent().find('.item-info > h2 > strong').text(count - 1 + 'x');
        $(".total-count").text(parseInt($(".total-count").text()) - parseInt($(this).parent().parent().data('cost')) + " $");
    }
});

$(document).on('click', '.add', function () {
    var count = parseInt($(this).parent().find('.count').val())//.text());
    $(this).parent().find('.count').val(count + 1);//.text(count + 1);
    $(this).parent().parent().find('.item-info > h2 > strong').text(count + 1 + 'x');
    $(".total-count").text(parseInt($(".total-count").text()) + parseInt($(this).parent().parent().data('cost')) + " $");
});

$(document).on('click', '.delete', function () {
    var count = parseInt($(this).parent().find('.count').val())//.text());
    var cost = parseInt($(this).parent().data('cost'));
    $(".total-count").text(parseInt($(".total-count").text()) - (count * cost) + " $");
    $(this).parent().remove();
});

$(document).on('click', '.clear-btn', function () {
    orderContent.empty();
    $(".total-count").text("0 $");
});

$(document).on('click', '.apply-discount', function () {
    //var discount = parseInt($(".discount-input").val());
    var total = parseInt($(".total-count").text());
    $(".total-count").text((total - ((discount / 100) * total)).toFixed(0) + " $");
});

$(document).on('click', '.coppy-order-btn', function () {    
    var order = [];
    orderContent.children().each(function () {
        var name = $(this).attr('id')
        var cost = $(this).data('cost');
        var count = $(this).find('.count').val()//.text();

        //order.push(count + 'x ' + name + ' ' + cost + '$');
        order.push(count + 'x ' + name);
    });
    // console.log(order);
    // var orderString = JSON.stringify(order);
    // console.log(orderString);
    // navigator.clipboard.writeText(orderString);
    var orderString = order.join(', ');
    console.log(orderString);
    
    // Clipboard'a yaz
    navigator.clipboard.writeText(orderString).then(function() {
        console.log('Order copied to clipboard');
    }).catch(function(err) {
        console.error('Could not copy text: ', err);
    });

    $(this).css('background-color', '#91ff5e');
    $(this).find("h3").text('Order Copied');
    setTimeout(() => {
        $(this).css('background-color', '#FFC85E');
        $(this).find("h3").text('Copy Order');
    }, 2000);
});

$(document).on('click', '.dark-mode', function () {
    $(".mainbody").toggleClass('dark');
    $(".basket-container").toggleClass('dark');
    $(".header").toggleClass('dark');
    $(".category-item").toggleClass('dark-item');
    $(".basket-cantainer").toggleClass('dark-order');
    $(".content-category").toggleClass('dark-content-category');
    $(".text").toggleClass('dark-text');
    //$(".item-info").toggleClass('dark-text');
    console.log('Dark mode activated');
});
